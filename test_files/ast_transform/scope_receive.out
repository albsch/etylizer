[{attribute,{loc,[],0,0},module,scope_receive},
 {function,{loc,[],0,0},
           foo,0,
           [{fun_clause,{loc,[],0,0},
                        [],[],
                        [{receive_after,{loc,[],0,0},
                                        [{case_clause,{loc,[],0,0},
                                                      {tuple,{loc,[],0,0},[{var,{loc,[],0,0},{local_bind,{'From',0}}},{integer,{loc,[],0,0},1}]},
                                                      [],
                                                      [{'case',{loc,[],0,0},
                                                               {integer,{loc,[],0,0},0},
                                                               [{case_clause,{loc,[],0,0},
                                                                             {match,{loc,[],0,0},{var,{loc,[],0,0},{local_bind,{'$X',0}}},{var,{loc,[],0,0},{local_bind,{'Z',0}}}},
                                                                             [],
                                                                             [{var,{loc,[],0,0},{local_ref,{'$X',0}}}]}]}]},
                                         {case_clause,{loc,[],0,0},
                                                      {tuple,{loc,[],0,0},[{var,{loc,[],0,0},{local_bind,{'From',0}}},{wildcard,{loc,[],0,0}}]},
                                                      [],
                                                      [{'case',{loc,[],0,0},
                                                               {integer,{loc,[],0,0},1},
                                                               [{case_clause,{loc,[],0,0},
                                                                             {match,{loc,[],0,0},{var,{loc,[],0,0},{local_bind,{'$X',0}}},{var,{loc,[],0,0},{local_bind,{'Z',0}}}},
                                                                             [],
                                                                             [{var,{loc,[],0,0},{local_ref,{'$X',0}}}]}]}]}],
                                        {block,{loc,[],0,0},
                                               [{'case',{loc,[],0,0},
                                                        {integer,{loc,[],0,0},2},
                                                        [{case_clause,{loc,[],0,0},
                                                                      {var,{loc,[],0,0},{local_bind,{'Y',0}}},
                                                                      [],
                                                                      [{op,{loc,[],0,0},'+',{var,{loc,[],0,0},{local_ref,{'Y',0}}},{integer,{loc,[],0,0},8}}]}]}]},
                                        [{'case',{loc,[],0,0},
                                                 {integer,{loc,[],0,0},2},
                                                 [{case_clause,{loc,[],0,0},
                                                               {var,{loc,[],0,0},{local_bind,{'Z',0}}},
                                                               [],
                                                               [{'case',{loc,[],0,0},
                                                                        {atom,{loc,[],0,0},none},
                                                                        [{case_clause,{loc,[],0,0},
                                                                                      {match,{loc,[],0,0},{var,{loc,[],0,0},{local_bind,{'$X',0}}},{var,{loc,[],0,0},{local_bind,{'From',0}}}},
                                                                                      [],
                                                                                      [{var,{loc,[],0,0},{local_ref,{'$X',0}}}]}]}]}]}]},
                         {call,{loc,[],0,0},
                               {var,{loc,[],0,0},{qref,io,format,2}},
                               [{string,{loc,[],0,0},"got ~w in foo, Y=~w~n"},
                                {cons,{loc,[],0,0},{var,{loc,[],0,0},{local_ref,{'Z',0}}},{cons,{loc,[],0,0},{var,{loc,[],0,0},{local_ref,{'Y',0}}},{nil,{loc,[],0,0}}}}]},
                         {'case',{loc,[],0,0},
                                 {var,{loc,[],0,0},{local_ref,{'From',0}}},
                                 [{case_clause,{loc,[],0,0},{atom,{loc,[],0,0},none},[],[{atom,{loc,[],0,0},ok}]},
                                  {case_clause,{loc,[],0,0},
                                               {var,{loc,[],0,0},{local_bind,{'Pid',0}}},
                                               [],
                                               [{op,{loc,[],0,0},'!',{var,{loc,[],0,0},{local_ref,{'Pid',0}}},{var,{loc,[],0,0},{local_ref,{'Z',0}}}}]}]},
                         {call,{loc,[],0,0},{var,{loc,[],0,0},{ref,foo,0}},[]}]}]}].
