[{attribute,{loc,[],0,0},module,scope_case},
 {function,{loc,[],0,0},
           foo,1,
           [{fun_clause,{loc,[],0,0},
                        [{var,{loc,[],0,0},{local_bind,{'X',0}}}],
                        [],
                        [{'case',{loc,[],0,0},
                                 {block,{loc,[],0,0},
                                        [{'case',{loc,[],0,0},
                                                 {integer,{loc,[],0,0},2},
                                                 [{case_clause,{loc,[],0,0},{var,{loc,[],0,0},{local_bind,{'Y',0}}},[],[{var,{loc,[],0,0},{local_ref,{'X',0}}}]}]}]},
                                 [{case_clause,{loc,[],0,0},
                                               {match,{loc,[],0,0},{var,{loc,[],0,0},{local_bind,{'A',0}}},{integer,{loc,[],0,0},1}},
                                               [[{op,{loc,[],0,0},'==',{var,{loc,[],0,0},{local_ref,{'Y',0}}},{integer,{loc,[],0,0},2}}]],
                                               [{'case',{loc,[],0,0},
                                                        {op,{loc,[],0,0},'-',{var,{loc,[],0,0},{local_ref,{'A',0}}},{integer,{loc,[],0,0},1}},
                                                        [{case_clause,{loc,[],0,0},
                                                                      {match,{loc,[],0,0},{var,{loc,[],0,0},{local_bind,{'$X',0}}},{var,{loc,[],0,0},{local_bind,{'Z',0}}}},
                                                                      [],
                                                                      [{var,{loc,[],0,0},{local_ref,{'$X',0}}}]}]}]},
                                  {case_clause,{loc,[],0,0},
                                               {wildcard,{loc,[],0,0}},
                                               [],
                                               [{'case',{loc,[],0,0},
                                                        {integer,{loc,[],0,0},1},
                                                        [{case_clause,{loc,[],0,0},
                                                                      {var,{loc,[],0,0},{local_bind,{'Z',0}}},
                                                                      [],
                                                                      [{'case',{loc,[],0,0},
                                                                               {integer,{loc,[],0,0},3},
                                                                               [{case_clause,{loc,[],0,0},
                                                                                             {match,{loc,[],0,0},{var,{loc,[],0,0},{local_bind,{'$X',0}}},{var,{loc,[],0,0},{local_bind,{'A',0}}}},
                                                                                             [],
                                                                                             [{var,{loc,[],0,0},{local_ref,{'$X',0}}}]}]}]}]}]}]},
                         {tuple,{loc,[],0,0},[{var,{loc,[],0,0},{local_ref,{'A',0}}},{var,{loc,[],0,0},{local_ref,{'Y',0}}},{var,{loc,[],0,0},{local_ref,{'Z',0}}}]}]}]}].
